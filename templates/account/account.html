{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block head %}
  <link rel="stylesheet" href="{% static 'css/components/forms.css' %}" />
  <link rel="stylesheet" href="{% static 'css/pages/auth.css' %}" />
  <link rel="stylesheet" href="{% static 'css/media.css' %}" />
{% endblock head %}

{% block content %}
  <h1 class="main-cont-ttl">Welcome - {{ user.username }}</h1>
  <ul class="b-crumbs">
    <li>
      <a href="{% url 'web:index' %}">Home</a>
    </li>
    <li>My Account</li>
  </ul>
  <article class="page-cont account-page">
    <div class="page-styling">
      <div class="auth-wrap">
        <div class="auth-col">
          <div class="auth-header">
            <h2>Profile Information</h2>
            <p>Update your profile information</p>
          </div>

          <div class="account-details-grid">
            <form id="update-account-form" class="register update-account-details" method="post" action="{% url 'account:update_account' %}">
              {% csrf_token %}

              <!-- Personal Details Card -->
              <div class="account-card personal-details">
                <h3>Personal Details</h3>
                <div class="row">
                  <div class="col-md-6">
                    {{ form.name|as_crispy_field }}
                  </div>
                  <div class="col-md-6">
                    {{ form.last_name|as_crispy_field }}
                  </div>
                </div>
                {{ form.sex|as_crispy_field }}
                {{ form.birth|as_crispy_field }}
                {{ form.dni|as_crispy_field }}
              </div>

              <!-- Contact Info Card -->
              <div class="account-card contact-info">
                <h3>Contact Info</h3>
                {{ form.email|as_crispy_field }}
                {{ form.phone|as_crispy_field }}
                {{ form.address|as_crispy_field }}
              </div>
            </form>

            <!-- Actions Card -->
            <div class="account-card actions">
              <h3>Actions</h3>
              <input type="submit" form="update-account-form" value="Update" class="btn btn-primary w-100 mb-3 update-btn" />
              <div class="divider">
                <span>or</span>
              </div>
              {% if request.user.is_authenticated %}
                <form action="{% url 'account:logout' %}" method="post" class="w-100">
                  {% csrf_token %}
                  <input type="submit" class="logout-account btn btn-outline-danger w-100" value="LogOut" />
                </form>
              {% endif %}
            </div>
          </div>

        </div>
      </div>
    </div>
  </article>
{% endblock content %}
